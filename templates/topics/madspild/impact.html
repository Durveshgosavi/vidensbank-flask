{% extends "base.html" %}

{% block title %}Mit Aftryk - Madspild - Vidensbank{% endblock %}

{% block extra_css %}
<style>
:root {
    --madspild-primary: #bc4b51;
    --madspild-dark: #8b2635;
    --madspild-light: #e8d4d6;
}

.impact-calculator {
    background: white;
    border-radius: 24px;
    padding: 3rem;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    margin: -3rem auto 4rem;
    max-width: 900px;
    position: relative;
    z-index: 10;
}

.calc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin: 2rem 0;
}

.calc-input-group {
    background: #f5f5f5;
    padding: 1.5rem;
    border-radius: 12px;
}

.calc-label {
    display: block;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.75rem;
}

.calc-input {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
}

.calc-input:focus {
    outline: none;
    border-color: var(--madspild-primary);
}

.calc-result {
    background: linear-gradient(135deg, var(--madspild-primary) 0%, var(--madspild-dark) 100%);
    color: white;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    margin: 2rem 0;
}

.result-value {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.result-label {
    font-size: 1rem;
    opacity: 0.9;
}

.impact-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
}

.impact-card {
    background: white;
    padding: 2.5rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border-left: 5px solid var(--madspild-primary);
    transition: all 0.3s ease;
}

.impact-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
}

.impact-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.impact-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 1rem;
}

.impact-text {
    color: #333333;
    line-height: 1.7;
}

.checklist {
    background: white;
    padding: 2.5rem;
    border-radius: 20px;
    margin: 3rem 0;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
}

.checklist-item {
    padding: 1.25rem;
    margin-bottom: 1rem;
    background: #f5f5f5;
    border-radius: 12px;
    border-left: 4px solid var(--madspild-primary);
    display: flex;
    gap: 1rem;
}

.checklist-item:last-child {
    margin-bottom: 0;
}

.checklist-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.checklist-content {
    flex: 1;
}

.checklist-title {
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 0.25rem;
}

.checklist-desc {
    color: #333333;
    font-size: 0.95rem;
}
</style>
{% endblock %}

{% block content %}
<header class="hero-video-container animate-on-scroll" style="background: linear-gradient(135deg, var(--madspild-primary) 0%, var(--madspild-dark) 100%);">
  <div class="bg-overlay-dark"></div>
  <div class="hero-content">
    <h1 class="hero-title">Mit Aftryk - Madspild</h1>
    <p class="hero-subtitle">Din rolle og dine muligheder</p>
  </div>
</header>

<section class="page-section">
  <header class="section-header animate-on-scroll">
    <p class="section-lead" style="max-width: 800px; margin: 0 auto;">
      Dit ansvar for planl√¶gning, produktion og kommunikation p√•virker direkte madspildet.
      Se hvor dine daglige valg har st√∏rst effekt.
    </p>
  </header>

  <nav class="filter-nav animate-on-scroll" aria-label="Navigation" style="margin-bottom: 3rem;">
    <a href="{{ url_for('topic_madspild_goal') }}" class="filter-pill">‚Üê Forrige</a>
    <a href="{{ url_for('topic_madspild_landing') }}" class="filter-pill">Tilbage til emnet</a>
    <a href="{{ url_for('topic_madspild_tips') }}" class="filter-pill">N√¶ste ‚Üí</a>
  </nav>

  <article style="max-width: 1200px; margin: 0 auto;">

    <div class="impact-calculator animate-on-scroll">
      <h2 style="text-align: center; margin-bottom: 2rem;">Beregn Dit Spild</h2>
      <p style="text-align: center; color: #333333; margin-bottom: 2rem;">
        Sk√∏n dit madspild baseret p√• kantines st√∏rrelse og nuv√¶rende praksis
      </p>

      <div class="calc-grid">
        <div class="calc-input-group">
          <label class="calc-label">M√•ltider pr. dag</label>
          <input type="number" id="meals" class="calc-input" value="500" min="10" step="10">
        </div>

        <div class="calc-input-group">
          <label class="calc-label">Nuv√¶rende spildprocent</label>
          <input type="number" id="waste" class="calc-input" value="25" min="0" max="100" step="1">
        </div>

        <div class="calc-input-group">
          <label class="calc-label">Dage i drift pr. √•r</label>
          <input type="number" id="days" class="calc-input" value="250" min="1" max="365">
        </div>
      </div>

      <div class="calc-result">
        <div class="result-value" id="totalWaste">0</div>
        <div class="result-label">kg madspild √•rligt</div>
        <div style="margin-top: 1rem; font-size: 0.95rem; opacity: 0.9;">
          Potentiel reduktion ved 50%: <span id="reduction" style="font-weight: 700;">0 kg</span>
        </div>
      </div>
    </div>

    <h2 class="section-title" style="text-align: center; margin: 4rem 0 2rem;">Hvor Du Kan G√∏re en Forskel</h2>

    <div class="impact-cards animate-on-scroll">
      <div class="impact-card">
        <div class="impact-icon">üìä</div>
        <h3 class="impact-title">Planl√¶gning</h3>
        <p class="impact-text">
          Brug historiske data til at estimere, hvor meget du skal lave. Mindre batches oftere
          reducerer overspill uden at p√•virke friskhed.
        </p>
      </div>

      <div class="impact-card">
        <div class="impact-icon">üçΩÔ∏è</div>
        <h3 class="impact-title">Buffet-Design</h3>
        <p class="impact-text">
          Placer popul√¶re retter f√∏rst. Justering af buffet-layout har enorm effekt p√• hvad
          g√¶ster tager og hvad der bliver til rester.
        </p>
      </div>

      <div class="impact-card">
        <div class="impact-icon">ü•Ñ</div>
        <h3 class="impact-title">Portionering</h3>
        <p class="impact-text">
          Start med mindre portioner som standard. G√¶ster kan altid tage mere, men det
          reducerer tallerkenspild v√¶sentligt.
        </p>
      </div>

      <div class="impact-card">
        <div class="impact-icon">üí¨</div>
        <h3 class="impact-title">Kommunikation</h3>
        <p class="impact-text">
          Fort√¶l g√¶sterne om retter, varmen og s√¶sonen. Positive narrativer √∏ger salget og
          reducerer rester p√• buffeten.
        </p>
      </div>
    </div>

    <!-- Practical Checklist -->
    <div class="checklist animate-on-scroll">
      <h2 class="section-title" style="text-align: center; margin-bottom: 2rem;">Dine Daglige Valg</h2>

      <div class="checklist-item">
        <div class="checklist-icon">‚ñ∏</div>
        <div class="checklist-content">
          <div class="checklist-title">DagensMenu</div>
          <div class="checklist-desc">Er den baseret p√• historiske salgdata eller g√¶tteri?</div>
        </div>
      </div>

      <div class="checklist-item">
        <div class="checklist-icon">‚ñ∏</div>
        <div class="checklist-content">
          <div class="checklist-title">M√¶ngdeestimater</div>
          <div class="checklist-desc">Hvor kommer dine tal fra? Er der systematisk feedback?</div>
        </div>
      </div>

      <div class="checklist-item">
        <div class="checklist-icon">‚ñ∏</div>
        <div class="checklist-content">
          <div class="checklist-title">Resto-behandling</div>
          <div class="checklist-desc">Hvad sker der med rester fra buffeten? Planl√¶gges de v√¶k?</div>
        </div>
      </div>

      <div class="checklist-item">
        <div class="checklist-icon">‚ñ∏</div>
        <div class="checklist-content">
          <div class="checklist-title">G√¶st-feedback</div>
          <div class="checklist-desc">Hvordan ved du hvad g√¶sterne vil have n√¶ste gang?</div>
        </div>
      </div>

      <div class="checklist-item">
        <div class="checklist-icon">‚ñ∏</div>
        <div class="checklist-content">
          <div class="checklist-title">M√•linger</div>
          <div class="checklist-desc">Registrerer I spild, og bruger I det til at justere?</div>
        </div>
      </div>
    </div>

  </article>
</section>

<section class="page-section callout-dark animate-on-scroll" style="background: linear-gradient(135deg, var(--madspild-primary) 0%, var(--madspild-dark) 100%);">
  <h2>N√¶ste: Tips & Tricks</h2>
  <p class="section-lead">
    F√• konkrete v√¶rkt√∏jer og strategier til at reducere madspild i praksis.
  </p>
  <div class="cta-row">
    <a href="{{ url_for('topic_madspild_tips') }}" class="btn-primary">L√¶s mere ‚Üí</a>
    <a href="{{ url_for('topic_madspild_landing') }}" class="btn-secondary is-light">‚Üê Tilbage til emnet</a>
  </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const mealsInput = document.getElementById('meals');
    const wasteInput = document.getElementById('waste');
    const daysInput = document.getElementById('days');

    function calculate() {
        const meals = parseInt(mealsInput.value) || 0;
        const waste = parseInt(wasteInput.value) || 0;
        const days = parseInt(daysInput.value) || 0;

        const avgWeight = 0.25; // kg per meal
        const totalWaste = Math.round(meals * waste / 100 * avgWeight * days);
        const reduction = Math.round(totalWaste / 2);

        document.getElementById('totalWaste').textContent = totalWaste.toLocaleString();
        document.getElementById('reduction').textContent = reduction.toLocaleString() + ' kg';
    }

    mealsInput.addEventListener('input', calculate);
    wasteInput.addEventListener('input', calculate);
    daysInput.addEventListener('input', calculate);

    calculate();
});
</script>
{% endblock %}
