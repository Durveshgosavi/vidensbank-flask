{% extends "base.html" %}

{% block title %}S√¶sonhjulet ‚Äì Din Guide til √Örets R√•varer | Canteen Buddy{% endblock %}

{% block content %}
<!-- Minimalist Hero -->
<header class="relative h-[60vh] min-h-[400px] flex items-center justify-center overflow-hidden bg-stone-900">
    <div class="absolute inset-0 z-0">
        <img src="{{ url_for('static', filename='images/seasonal_fruit.jpg') }}" alt="S√¶son"
            class="w-full h-full object-cover opacity-40">
        <div class="absolute inset-0 bg-gradient-to-b from-stone-900/50 via-stone-900/20 to-stone-900"></div>
    </div>

    <div class="relative z-10 text-center text-white px-6">
        <p class="text-sm font-bold tracking-[0.2em] uppercase mb-4 text-cb-green-medium">V√¶rkt√∏jskassen</p>
        <h1 class="font-display text-6xl md:text-8xl font-light tracking-tight mb-6">S√¶sonhjulet</h1>
        <p class="font-sans text-xl font-light text-stone-300 max-w-xl mx-auto">
            Planl√¶g din menu efter naturens rytme. Det smager bedst, koster mindst og sk√•ner klimaet.
        </p>
    </div>
</header>

<!-- Interactive Wheel Section -->
<section class="py-12 bg-stone-50 min-h-screen">
    <div class="max-w-7xl mx-auto px-6">

        <!-- Month Selector -->
        <div
            class="flex flex-wrap justify-center gap-2 mb-16 sticky top-4 z-20 bg-stone-50/90 backdrop-blur-sm p-4 rounded-full shadow-sm border border-stone-200">
            {% for month in ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'] %}
            <button onclick="setMonth({{ loop.index0 }})" id="btn-{{ loop.index0 }}"
                class="w-12 h-12 rounded-full text-sm font-bold transition-all duration-300 hover:scale-110 focus:outline-none
                       {{ 'bg-stone-900 text-white shadow-lg scale-110' if loop.index0 == 0 else 'bg-white text-stone-500 hover:bg-stone-200' }}">
                {{ month }}
            </button>
            {% endfor %}
        </div>

        <!-- Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 transition-all duration-500" id="season-content">

            <!-- Vegetables -->
            <div class="bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden group">
                <div class="h-2 bg-green-500"></div>
                <div class="p-8">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl">ü•¶
                        </div>
                        <h2 class="font-display text-3xl text-stone-900">Gr√∏nt</h2>
                    </div>
                    <ul id="veg-list" class="space-y-3">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </div>

            <!-- Fruit -->
            <div class="bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden group">
                <div class="h-2 bg-orange-500"></div>
                <div class="p-8">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-2xl">üçé
                        </div>
                        <h2 class="font-display text-3xl text-stone-900">Frugt</h2>
                    </div>
                    <ul id="fruit-list" class="space-y-3">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </div>

            <!-- Fish -->
            <div class="bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden group">
                <div class="h-2 bg-blue-500"></div>
                <div class="p-8">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-2xl">üêü
                        </div>
                        <h2 class="font-display text-3xl text-stone-900">Havet</h2>
                    </div>
                    <ul id="fish-list" class="space-y-3">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </div>

        </div>

        <!-- Empty State / Message -->
        <div id="season-message" class="text-center mt-12 text-stone-400 font-light italic">
            <!-- Populated by JS -->
        </div>

    </div>
</section>

<script>
    const seasonData = [
        // Jan (0)
        {
            veg: ["K√•l (Alle typer)", "Guler√∏dder", "Pastinak", "R√∏dbede", "Jordskokker", "L√∏g"],
            fruit: ["√Übler (Lager)", "P√¶rer (Lager)"],
            fish: ["Torsk", "Kuller", "M√∏rksej", "Muslinger", "√òsters"],
            msg: "Vinteren er rodfrugternes og k√•lens fest. Brug dem i varme supper og bagte retter."
        },
        // Feb (1)
        {
            veg: ["K√•l (Alle typer)", "Guler√∏dder", "Pastinak", "R√∏dbede", "Porrer"],
            fruit: ["√Übler (Lager)"],
            fish: ["Torsk", "Stenbiderrogn", "Skrubbe", "Muslinger"],
            msg: "Lageret svinder ind. V√¶r kreativ med fermentering og syltning fra efter√•ret."
        },
        // Mar (2)
        {
            veg: ["Ramsl√∏g (Slutningen)", "Jordskokker", "Porrer"],
            fruit: ["√Übler (Lager)"],
            fish: ["Stenbiderrogn", "R√∏dsp√¶tte", "Sild"],
            msg: "For√•ret lurer. Hold √∏je med de f√∏rste sp√¶de skud i skovbunden."
        },
        // Apr (3)
        {
            veg: ["Ramsl√∏g", "Asparges (Slutningen)", "Radiser"],
            fruit: ["Rabarber (Slutningen)"],
            fish: ["R√∏dsp√¶tte", "Pighvar", "Sild"],
            msg: "Endelig! De f√∏rste friske gr√∏ntsager titter frem. Rabarber og asparges er kongerne."
        },
        // Maj (4)
        {
            veg: ["Asparges", "Nye Kartofler", "Spinat", "Salat", "Radiser"],
            fruit: ["Rabarber"],
            fish: ["Hornfisk", "R√∏dsp√¶tte", "Pighvar", "Jomfruhummer"],
            msg: "Lysere tider. De nye kartofler er en delikatesse i sig selv."
        },
        // Jun (5)
        {
            veg: ["Asparges", "Nye Kartofler", "√Ürter", "Jordb√¶r", "Salat", "Agurk"],
            fruit: ["Jordb√¶r", "Hyldeblomst"],
            fish: ["Makrel", "Hornfisk", "Kulmule", "Jomfruhummer"],
            msg: "Sommeren eksploderer. Spis jordb√¶r og √¶rter direkte fra b√¶lgen."
        },
        // Jul (6)
        {
            veg: ["√Ürter", "B√∏nner", "Nye Kartofler", "Tomater", "Agurk", "Squash"],
            fruit: ["Jordb√¶r", "Hindb√¶r", "Solb√¶r", "Kirseb√¶r"],
            fish: ["Makrel", "Kulmule", "M√∏rksej"],
            msg: "H√∏js√¶son for b√¶r og lette gr√∏ntsager. Grillen skal frem."
        },
        // Aug (7)
        {
            veg: ["Majs", "B√∏nner", "Tomater", "Squash", "Broccoli", "Blomk√•l"],
            fruit: ["Blommer", "Hindb√¶r", "Bromb√¶r", "Tidlige √Übler"],
            fish: ["Makrel", "Sild", "Kulmule"],
            msg: "Sensommerens overflod. Tomaterne har f√•et masser af sol og smager af mest."
        },
        // Sep (8)
        {
            veg: ["Gr√¶skar", "K√•l", "Guler√∏dder", "R√∏dbede", "Svampe", "Majs"],
            fruit: ["√Übler", "P√¶rer", "Blommer", "Hyldeb√¶r"],
            fish: ["Sild", "Makrel", "M√∏rksej"],
            msg: "H√∏sten er i hus. Det er nu, du skal sylte og henkoge til vinteren."
        },
        // Okt (9)
        {
            veg: ["Gr√¶skar", "K√•l", "Jordskokker", "Rodfrugter", "Svampe"],
            fruit: ["√Übler", "P√¶rer", "Valn√∏dder"],
            fish: ["Sild", "Muslinger", "√òsters", "Torsk"],
            msg: "Efter√•rsstorme og simremad. Gr√¶skar og svampe giver dybde og umami."
        },
        // Nov (10)
        {
            veg: ["K√•l (Alle typer)", "Rodfrugter", "Jordskokker", "Gr√¶skar"],
            fruit: ["√Übler (Lager)", "P√¶rer (Lager)"],
            fish: ["Muslinger", "√òsters", "Torsk", "Kuller"],
            msg: "Vinteren n√¶rmer sig. K√•len f√•r s√∏dme af den f√∏rste frost."
        },
        // Dec (11)
        {
            veg: ["K√•l (Alle typer)", "Rodfrugter", "Jordskokker"],
            fruit: ["√Übler (Lager)"],
            fish: ["Torsk", "Kuller", "Muslinger", "√òsters"],
            msg: "Julens klassikere. R√∏dk√•l, gr√∏nk√•l og torsk h√∏rer s√¶sonen til."
        }
    ];

    function setMonth(monthIndex) {
        // Update Buttons
        document.querySelectorAll('button[id^="btn-"]').forEach((btn, idx) => {
            if (idx === monthIndex) {
                btn.className = "w-12 h-12 rounded-full text-sm font-bold transition-all duration-300 focus:outline-none bg-stone-900 text-white shadow-lg scale-110";
            } else {
                btn.className = "w-12 h-12 rounded-full text-sm font-bold transition-all duration-300 hover:scale-110 focus:outline-none bg-white text-stone-500 hover:bg-stone-200";
            }
        });

        // Update Content with Animation
        const content = document.getElementById('season-content');
        content.classList.add('opacity-50', 'scale-95');

        setTimeout(() => {
            const data = seasonData[monthIndex];

            updateList('veg-list', data.veg);
            updateList('fruit-list', data.fruit);
            updateList('fish-list', data.fish);

            document.getElementById('season-message').textContent = `"${data.msg}"`;

            content.classList.remove('opacity-50', 'scale-95');
        }, 150);
    }

    function updateList(id, items) {
        const list = document.getElementById(id);
        list.innerHTML = items.map(item => `
      <li class="flex items-center text-stone-600 font-light border-b border-stone-100 pb-2 last:border-0">
        <span class="w-1.5 h-1.5 rounded-full bg-stone-300 mr-3"></span>
        ${item}
      </li>
    `).join('');
    }

    // Init with current month
    const currentMonth = new Date().getMonth();
    setMonth(currentMonth);
</script>
{% endblock %}