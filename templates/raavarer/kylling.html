{% extends "base.html" %}

{% block title %}Kylling - Råvarer - Vidensbank{% endblock %}

{% block content %}

<!-- Minimalist Hero -->
<header class="relative h-[70vh] min-h-[500px] flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
        <img src="{{ url_for('static', filename='images/raw_chicken.png') }}" alt="Kylling"
            class="w-full h-full object-cover opacity-90">
        <div class="absolute inset-0 bg-black/30"></div>
    </div>

    <div class="relative z-10 text-center text-white px-6">
        <p class="text-sm font-bold tracking-[0.2em] uppercase mb-4 text-white/80">Råvareleksikon</p>
        <h1 class="font-display text-7xl md:text-9xl font-light tracking-tight mb-6">Kylling</h1>
        <p class="font-sans text-xl font-light text-white/90 max-w-xl mx-auto">
            Den alsidige hverdagshelt. Et proteinrigt fundament i det moderne køkken.
        </p>
    </div>
</header>

<!-- The Story: Elaborative Content -->
<section class="py-24 bg-white">
    <div class="max-w-3xl mx-auto px-6">
        <div class="flex items-baseline justify-between mb-12 border-b border-stone-200 pb-6">
            <h2 class="font-display text-4xl text-stone-900">Effektivitet & Smag</h2>
            <span class="font-mono text-stone-400 text-sm">01</span>
        </div>

        <div class="prose prose-lg prose-stone font-serif leading-loose text-stone-600">
            <p>
                Kylling har indtaget en unik position i verdens køkkener. Fra den franske coq au vin til den thailandske
                grønne karry –
                kyllingens milde smag og evne til at absorbere krydderier gør den til det perfekte lærred for kulinarisk
                kreativitet.
            </p>
            <p>
                Klimamæssigt er kylling en succeshistorie sammenlignet med det røde kød.
                Kyllinger er utroligt effektive til at omsætte foder til kød, hvilket resulterer i et markant lavere
                CO₂-aftryk.
                Men "lavt" er relativt. Selvom kylling er bedre end oksekød, er det stadig en animalsk produktion, der
                kræver ressourcer.
            </p>
            <p>
                Udfordringen ligger i dyrevelfærden. Den industrielle effektivitet har ofte en pris for dyret.
                Som professionelle har vi et ansvar for at vælge kyllinger, der har levet et liv med plads til at baske
                med vingerne.
                Kvalitet kan smages, og et godt liv giver bedre kødstruktur og dybere smag.
            </p>
        </div>
    </div>
</section>

<!-- Environmental Profile (Radar Chart) -->
<section class="py-24 bg-stone-50 overflow-hidden">
    <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-2 gap-16 items-center">
            <div>
                <h2 class="font-display text-3xl text-stone-900 mb-6">Miljøprofil</h2>
                <p class="text-stone-600 font-serif leading-relaxed mb-8">
                    Kylling er det mest klimaeffektive kød, men har stadig et aftryk.
                    Grafen viser kyllingens belastning (gul) sammenlignet med oksekød (grå skygge) og plantebaseret
                    (grøn).
                </p>

                <div class="space-y-6">
                    <div class="flex items-center justify-between border-b border-stone-200 pb-2">
                        <span class="text-sm font-bold uppercase tracking-widest text-stone-500">Klimaaftryk</span>
                        <span class="font-display text-xl text-stone-900">6.9 kg CO₂e</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-stone-200 pb-2">
                        <span class="text-sm font-bold uppercase tracking-widest text-stone-500">Vandforbrug</span>
                        <span class="font-display text-xl text-stone-900">4.300 L/kg</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-stone-200 pb-2">
                        <span class="text-sm font-bold uppercase tracking-widest text-stone-500">Arealanvendelse</span>
                        <span class="font-display text-xl text-stone-900">12 m²/år</span>
                    </div>
                </div>
            </div>

            <div class="relative">
                <div class="aspect-square w-full max-w-md mx-auto bg-white rounded-full shadow-xl p-8">
                    <canvas id="chickenRadarChart"></canvas>
                </div>
                <!-- Decorative elements -->
                <div
                    class="absolute -top-10 -right-10 w-32 h-32 bg-yellow-100 rounded-full mix-blend-multiply filter blur-xl opacity-70">
                </div>
                <div
                    class="absolute -bottom-10 -left-10 w-32 h-32 bg-stone-200 rounded-full mix-blend-multiply filter blur-xl opacity-70">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Seasonality Section -->
<section class="py-24 bg-white">
    <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-12">
            <h2 class="font-display text-3xl text-stone-900 mb-4">Sæson</h2>
            <p class="text-stone-500">Kylling produceres året rundt, men frilandskyllinger har sæson.</p>
        </div>

        <div class="relative">
            <!-- Months Grid -->
            <div class="grid grid-cols-12 gap-1 mb-2">
                {% for month in ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'] %}
                <div class="text-center">
                    <div class="text-[10px] uppercase font-bold text-stone-400 mb-2">{{ month }}</div>
                    <div class="h-12 w-full rounded-sm transition-all duration-500
            {% if month in ['Maj', 'Jun', 'Jul', 'Aug', 'Sep'] %}
              bg-stone-800 scale-y-100
            {% else %}
              bg-stone-300 scale-y-75
            {% endif %}
          "></div>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-4">
                <span
                    class="inline-block px-3 py-1 bg-stone-100 text-stone-600 text-xs font-bold uppercase tracking-widest rounded-full">
                    Bedst: Sommer & Tidligt Efterår (Friland)
                </span>
            </div>
        </div>
    </div>
</section>

<!-- Culinary Profile -->
<section class="py-24 bg-white">
    <div class="max-w-3xl mx-auto px-6">
        <div class="flex items-baseline justify-between mb-12 border-b border-stone-200 pb-6">
            <h2 class="font-display text-4xl text-stone-900">I Køkkenet</h2>
            <span class="font-mono text-stone-400 text-sm">02</span>
        </div>

        <div class="grid md:grid-cols-2 gap-12">
            <div>
                <h3 class="font-sans font-bold text-lg mb-4 text-stone-800">Udskæringer</h3>
                <ul class="space-y-4 text-stone-600 font-serif">
                    <li class="flex items-start">
                        <span class="text-stone-300 mr-4">01</span>
                        <span><strong>Bryst:</strong> Magert og mildt. Pas på med overtilberedning – det bliver hurtigt
                            tørt.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-stone-300 mr-4">02</span>
                        <span><strong>Lår & Overlår:</strong> Mørkere kød med mere fedt og smag. Perfekt til gryderetter
                            og ovnstegning.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-stone-300 mr-4">03</span>
                        <span><strong>Skrog:</strong> Guldgruben. Kog altid fond på skrogene for at udnytte ressourcen
                            fuldt ud.</span>
                    </li>
                </ul>
            </div>

            <div>
                <h3 class="font-sans font-bold text-lg mb-4 text-stone-800">Tilberedning & Tips</h3>
                <p class="text-stone-600 font-serif leading-relaxed mb-6">
                    Kylling er taknemmelig. Den kan steges, koges, braiseres og grilles.
                    Husk at skindet indeholder meget smag – steg det sprødt, selvom det ikke skal spises, for at give
                    smag til kødet.
                </p>
                <div class="bg-stone-50 p-6 rounded-lg border border-stone-100">
                    <p class="text-sm font-bold text-stone-900 mb-2">PRO TIP</p>
                    <p class="text-stone-600 text-sm italic">
                        "Brug confitering til lårene. Det mørner kødet og giver en intens smag, som kan løfte enhver
                        salat eller sandwich."
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Minimalist Calculator -->
<section class="py-24 bg-stone-900 text-white">
    <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="font-display text-3xl md:text-4xl mb-4">Beregn Din Effekt</h2>
            <p class="text-stone-400 font-light">Se effekten af at vælge kylling frem for tungere kødtyper.</p>
        </div>

        <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class="space-y-8">
                <div>
                    <label class="block text-xs font-bold uppercase tracking-widest text-stone-500 mb-2">Forbrug
                        (kg/uge)</label>
                    <input type="number" id="chickenAmount" value="20"
                        class="w-full bg-transparent border-b border-stone-700 py-4 text-3xl font-display focus:outline-none focus:border-white transition-colors text-white placeholder-stone-700">
                </div>

                <div>
                    <label class="block text-xs font-bold uppercase tracking-widest text-stone-500 mb-2">Sammenlign
                        med</label>
                    <select id="chickenComparison"
                        class="w-full bg-transparent border-b border-stone-700 py-4 text-xl font-sans focus:outline-none focus:border-white transition-colors text-white appearance-none cursor-pointer">
                        <option value="60" class="text-stone-900">Oksekød (60 kg CO₂e)</option>
                        <option value="12" class="text-stone-900">Svinekød (12 kg CO₂e)</option>
                        <option value="24" class="text-stone-900">Lammekød (24 kg CO₂e)</option>
                    </select>
                </div>

                <button onclick="calculateChickenSavings()"
                    class="group flex items-center gap-4 text-white hover:text-stone-300 transition-colors">
                    <span class="text-sm font-bold uppercase tracking-widest">Beregn nu</span>
                    <span class="text-2xl group-hover:translate-x-2 transition-transform">→</span>
                </button>
            </div>

            <div id="chickenSavingsResult" class="hidden opacity-0 transition-opacity duration-700">
                <div class="border-l border-stone-700 pl-12">
                    <div class="mb-8">
                        <div class="text-6xl font-display text-white mb-2" id="chickenSavingsValue">0</div>
                        <div class="text-stone-500 text-sm uppercase tracking-widest">kg CO₂e sparet / uge</div>
                    </div>
                    <div>
                        <div class="text-4xl font-display text-stone-300 mb-2" id="chickenAnnualSavings">0</div>
                        <div class="text-stone-500 text-sm uppercase tracking-widest">tons CO₂e / år</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Radar Chart Config
    Chart.defaults.font.family = "'Work Sans', sans-serif";

    const ctxRadar = document.getElementById('chickenRadarChart');
    new Chart(ctxRadar, {
        type: 'radar',
        data: {
            labels: ['CO₂e', 'Vand', 'Areal', 'Eutrofiering'],
            datasets: [{
                label: 'Kylling',
                data: [11.5, 28, 4, 30], // Relative to beef (100)
                fill: true,
                backgroundColor: 'rgba(234, 179, 8, 0.2)', // Yellow-500
                borderColor: 'rgb(234, 179, 8)',
                pointBackgroundColor: 'rgb(234, 179, 8)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgb(234, 179, 8)'
            }, {
                label: 'Oksekød (Reference)',
                data: [100, 100, 100, 100],
                fill: false,
                borderColor: 'rgba(120, 113, 108, 0.3)', // Stone-500 low opacity
                borderDash: [5, 5],
                pointRadius: 0
            }]
        },
        options: {
            elements: {
                line: { borderWidth: 3 }
            },
            scales: {
                r: {
                    angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                    grid: { color: 'rgba(0, 0, 0, 0.1)' },
                    pointLabels: {
                        font: { size: 12, weight: 'bold' },
                        color: '#44403c'
                    },
                    ticks: { display: false, backdropColor: 'transparent' },
                    suggestedMin: 0,
                    suggestedMax: 100
                }
            },
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { font: { size: 12 } }
                }
            }
        }
    });

    function calculateChickenSavings() {
        const chickenAmount = parseFloat(document.getElementById('chickenAmount').value) || 0;
        const comparisonValue = parseFloat(document.getElementById('chickenComparison').value);
        const chickenCO2 = 6.9;

        const amountKg = chickenAmount;
        const chickenEmissions = amountKg * chickenCO2;
        const comparisonEmissions = amountKg * comparisonValue;

        let weeklySavings = comparisonEmissions - chickenEmissions;
        const annualSavings = (weeklySavings * 52) / 1000;

        // Animate numbers
        animateValue("chickenSavingsValue", 0, weeklySavings.toFixed(1), 1000);
        animateValue("chickenAnnualSavings", 0, annualSavings.toFixed(2), 1000);

        const resultDiv = document.getElementById('chickenSavingsResult');
        resultDiv.classList.remove('hidden');
        void resultDiv.offsetWidth;
        resultDiv.classList.remove('opacity-0');
    }

    function animateValue(id, start, end, duration) {
        const obj = document.getElementById(id);
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            obj.innerHTML = (progress * (end - start) + start).toFixed(id === 'chickenAnnualSavings' ? 2 : 1);
            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }
</script>

{% endblock %}