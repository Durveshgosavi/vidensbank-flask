{% extends "base.html" %}

{% block title %}Bælgfrugter - Råvarer - Vidensbank{% endblock %}

{% block content %}
<header class="page-header has-cover"
    style="background-image: url('{{ url_for('static', filename='images/raw_legumes.png') }}');">
    <div class="page-header__content">
        <p class="eyebrow">RÅVARER</p>
        <h1>Bælgfrugter</h1>
        <p>Fremtidens protein er her allerede. Linser, bønner og ærter er klimavenlige, billige og fyldt med næring.</p>
        <nav class="filter-nav" aria-label="Filtrer emner">
            <a href="{{ url_for('raavarer_landing') }}" class="filter-pill">← Tilbage til Råvarer</a>
        </nav>
    </div>
</header>

<section class="page-section">
    <header class="section-header">
        <h2 class="section-title">Klimaaftryk & Miljø</h2>
        <p class="section-lead">Med et aftryk på kun 2 kg CO₂e pr. kg er bælgfrugter det ultimative valg for den
            klimabevidste kok.</p>
    </header>

    <div class="grid-layout grid-2-col">
        <div class="kpi-dashboard">
            <div class="grid-layout" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="kpi-card">
                    <div class="kpi-label">Klimaaftryk</div>
                    <div class="kpi-number" style="color: #22c55e;">2.0</div>
                    <p>kg CO₂e pr. kg</p>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Vs. Oksekød</div>
                    <div class="kpi-number">-97%</div>
                    <p>lavere udledning</p>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Vandforbrug</div>
                    <div class="kpi-number">4.055</div>
                    <p>liter pr. kg</p>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Areal</div>
                    <div class="kpi-number">3.4</div>
                    <p>m² pr. kg årligt</p>
                </div>
            </div>
        </div>

        <div class="kpi-card">
            <h3 class="card-title">Hvorfor vælge bælgfrugter?</h3>
            <ul class="list-style-none">
                <li class="mb-3"><strong>Kvælstoffiksering:</strong> Bælgplanter optager kvælstof direkte fra luften,
                    hvilket sparer kunstgødning og gavner jorden.</li>
                <li class="mb-3"><strong>Jordforbedring:</strong> De efterlader jorden sundere til efterfølgende
                    afgrøder, perfekt til sædskifte.</li>
                <li class="mb-3"><strong>Biodiversitet:</strong> Blomstrende bælgplanter tiltrækker bier og insekter,
                    hvilket styrker økosystemet.</li>
            </ul>
            <div class="mt-4 p-4 bg-light-green border-radius-8">
                <h4 class="mb-2">Økonomisk Fordel</h4>
                <p class="mb-0">Bælgfrugter er markant billigere end kød. Du sparer ca. 70% pr. gram protein ved at
                    vælge linser frem for oksekød.</p>
            </div>
        </div>
    </div>
</section>

<section class="page-section is-muted">
    <header class="section-header">
        <h2 class="section-title">Typer af Bælgfrugter</h2>
        <p class="section-lead">En verden af variation, smag og tekstur.</p>
    </header>

    <div class="grid-layout grid-4-col">
        <div class="aww-card">
            <div class="card-content-body">
                <h3 class="card-title">Linser</h3>
                <p class="card-teaser">Hurtige at tilberede (ingen blødsætning). Perfekte til supper, dal og salater.
                    Højt proteinindhold (25g/100g).</p>
            </div>
        </div>

        <div class="aww-card">
            <div class="card-content-body">
                <h3 class="card-title">Kikærter</h3>
                <p class="card-teaser">Nøddeagtig smag og fast tekstur. Basis for hummus og falafel. Kræver blødsætning,
                    men er ventetiden værd.</p>
            </div>
        </div>

        <div class="aww-card">
            <div class="card-content-body">
                <h3 class="card-title">Bønner</h3>
                <p class="card-teaser">Utallige varianter (kidney, hvide, sorte). Rige på fiber og mættende. Ideelle til
                    gryderetter og chili.</p>
            </div>
        </div>

        <div class="aww-card">
            <div class="card-content-body">
                <h3 class="card-title">Ærter</h3>
                <p class="card-teaser">Søde og børnevenlige. Gule ærter er en dansk klassiker. Bruges også til at lave
                    ærteprotein-isolat.</p>
            </div>
        </div>
    </div>
</section>

<section class="page-section">
    <div class="container max-w-1000">
        <div class="bg-white p-8 rounded-xl shadow-lg border-1 border-light">
            <h2 class="section-title mb-6">Beregn Din Klimabesparelse</h2>
            <p class="text-center mb-8">Se hvor meget CO₂ og penge du sparer ved at erstatte kød med bælgfrugter.</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div>
                    <label class="block text-sm font-bold uppercase tracking-wider text-dark mb-2">
                        Mængde kød erstattet (g/uge)
                    </label>
                    <input type="range" id="meatAmount" min="0" max="2000" value="500" step="50"
                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-500"
                        oninput="calculateLegumesSavings()">
                    <div class="text-right font-bold text-lg text-green-600 mt-2"><span
                            id="meatAmountDisplay">500</span>g</div>
                </div>
                <div>
                    <label class="block text-sm font-bold uppercase tracking-wider text-dark mb-2">
                        Hvilket kød erstatter du?
                    </label>
                    <select id="meatType"
                        class="w-full px-4 py-3 bg-light border border-gray-300 rounded text-dark text-lg focus:outline-none focus:border-green-500"
                        onchange="calculateLegumesSavings()">
                        <option value="60">Oksekød (60 kg CO₂e/kg)</option>
                        <option value="24">Lammekød (24 kg CO₂e/kg)</option>
                        <option value="12" selected>Svinekød (12 kg CO₂e/kg)</option>
                        <option value="6.9">Kylling (6.9 kg CO₂e/kg)</option>
                    </select>
                </div>
            </div>

            <div id="legumesSavingsResult" class="mt-8 fade-in">
                <div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                    <div class="text-sm uppercase tracking-wider text-dark mb-2">Ugentlig besparelse</div>
                    <div class="text-5xl font-bold text-green-600 mb-2">
                        <span id="legumesSavingsValue">0</span> <span class="text-2xl text-dark">kg CO₂e/uge</span>
                    </div>

                    <div class="grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-green-200">
                        <div>
                            <div class="text-2xl font-bold text-dark" id="legumesAnnualSavings">0</div>
                            <div class="text-xs uppercase tracking-wider text-gray-600">tons CO₂e/år</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-dark" id="legumesFlightEquiv">0</div>
                            <div class="text-xs uppercase tracking-wider text-gray-600">flyrejser til London</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-dark" id="legumesMoneySaved">0</div>
                            <div class="text-xs uppercase tracking-wider text-gray-600">kr sparet/år</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Data Sources -->
<section class="bg-cb-taupe-light py-12">
    <div class="mx-auto max-w-7xl px-6">
        <h3 class="text-center font-display text-2xl font-bold text-stone-900 mb-6 uppercase">Datakilder</h3>
        <div class="flex flex-wrap justify-center gap-4 text-sm text-stone-600 font-sans">
            <span>• CONCITO's Den Store Klimadatabase v2.0</span>
            <span>• Poore & Nemecek (2018), Science</span>
            <span>• DTU Fødevareinstituttet</span>
            <span>• Water Footprint Network</span>
        </div>
    </div>
</section>

<!-- Load Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<script>
    // Calculator function
    function calculateLegumesSavings() {
        const meatAmount = parseFloat(document.getElementById('meatAmount').value) || 0;
        const meatCO2 = parseFloat(document.getElementById('meatType').value);
        const legumesCO2 = 2; // kg CO2e/kg

        // Update display
        document.getElementById('meatAmountDisplay').textContent = meatAmount;

        const amountKg = meatAmount / 1000;
        const meatEmissions = amountKg * meatCO2;
        const legumesEmissions = amountKg * legumesCO2;

        const weeklySavings = meatEmissions - legumesEmissions;
        const annualSavings = (weeklySavings * 52) / 1000; // Convert to tons
        const flights = Math.round(annualSavings / 0.25); // ~250kg per flight

        // Money savings estimation
        let meatPrice = 80; // Default pork
        if (meatCO2 == 60) meatPrice = 120; // Beef
        else if (meatCO2 == 24) meatPrice = 100; // Lamb
        else if (meatCO2 == 6.9) meatPrice = 60; // Chicken

        const legumesPrice = 25;
        const weeklyMoneySaved = (amountKg * meatPrice) - (amountKg * legumesPrice);
        const annualMoneySaved = Math.round(weeklyMoneySaved * 52);

        document.getElementById('legumesSavingsValue').textContent = weeklySavings.toFixed(1);
        document.getElementById('legumesAnnualSavings').textContent = annualSavings.toFixed(2);
        document.getElementById('legumesFlightEquiv').textContent = flights;
        document.getElementById('legumesMoneySaved').textContent = annualMoneySaved.toLocaleString();
    }

    // Initialize calculator
    document.addEventListener('DOMContentLoaded', function () {
        calculateLegumesSavings();
    });
</script>

{% endblock %}