{% extends "base.html" %}

{% block title %}Svinekød - Råvarer - Vidensbank{% endblock %}

{% block content %}

<!-- Minimalist Hero -->
<header class="relative h-[70vh] min-h-[500px] flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
        <img src="{{ url_for('static', filename='images/raw_pork.png') }}" alt="Svinekød"
            class="w-full h-full object-cover opacity-90">
        <div class="absolute inset-0 bg-black/30"></div>
    </div>

    <div class="relative z-10 text-center text-white px-6">
        <p class="text-sm font-bold tracking-[0.2em] uppercase mb-4 text-white/80">Råvareleksikon</p>
        <h1 class="font-display text-7xl md:text-9xl font-light tracking-tight mb-6">Svinekød</h1>
        <p class="font-sans text-xl font-light text-white/90 max-w-xl mx-auto">
            Dansk madkulturs rygrad. En balancegang mellem tradition og bæredygtighed.
        </p>
    </div>
</header>

<!-- The Story: Elaborative Content -->
<section class="py-24 bg-white">
    <div class="max-w-3xl mx-auto px-6">
        <div class="flex items-baseline justify-between mb-12 border-b border-stone-200 pb-6">
            <h2 class="font-display text-4xl text-stone-900">Tradition & Fornyelse</h2>
            <span class="font-mono text-stone-400 text-sm">01</span>
        </div>

        <div class="prose prose-lg prose-stone font-serif leading-loose text-stone-600">
            <p>
                Intet dyr har formet det danske køkken som grisen. Fra den sprøde flæskesteg juleaften til hverdagens
                frikadeller og leverpostej.
                Svinekød er dybt forankret i vores madkultur og historie. Det er en råvare, der byder på en enorm
                variation i smag og tekstur,
                afhængigt af udskæring og tilberedning.
            </p>
            <p>
                I klimaregnskabet placerer svinekød sig i midterfeltet. Med ca. 12 kg CO₂e pr. kg udleder det markant
                mindre end oksekød,
                men stadig næsten dobbelt så meget som kylling. Det store problem er ofte foderet – store mængder
                importeret soja,
                der kan være problematisk for regnskoven.
            </p>
            <p>
                Fremtidens svinekød handler om kvalitet frem for kvantitet. Det handler om at støtte producenter, der
                tænker i lokale foderkilder
                og høj dyrevelfærd. Og så handler det om at genopdage de glemte udskæringer – kæber, skanke og
                brystflæsk –
                hvor smagen er størst, og ressourceudnyttelsen er bedst.
            </p>
        </div>
    </div>
</section>

<!-- Environmental Profile (Radar Chart) -->
<section class="py-24 bg-stone-50 overflow-hidden">
    <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-2 gap-16 items-center">
            <div>
                <h2 class="font-display text-3xl text-stone-900 mb-6">Miljøprofil</h2>
                <p class="text-stone-600 font-serif leading-relaxed mb-8">
                    Svinekød ligger i midterfeltet. Foderet (soja) er den store synder, især for arealanvendelse.
                    Grafen viser svinekødets belastning (pink) sammenlignet med oksekød (grå skygge) og plantebaseret
                    (grøn).
                </p>

                <div class="space-y-6">
                    <div class="flex items-center justify-between border-b border-stone-200 pb-2">
                        <span class="text-sm font-bold uppercase tracking-widest text-stone-500">Klimaaftryk</span>
                        <span class="font-display text-xl text-stone-900">12 kg CO₂e</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-stone-200 pb-2">
                        <span class="text-sm font-bold uppercase tracking-widest text-stone-500">Vandforbrug</span>
                        <span class="font-display text-xl text-stone-900">6.000 L/kg</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-stone-200 pb-2">
                        <span class="text-sm font-bold uppercase tracking-widest text-stone-500">Arealanvendelse</span>
                        <span class="font-display text-xl text-stone-900">11 m²/år</span>
                    </div>
                </div>
            </div>

            <div class="relative">
                <div class="aspect-square w-full max-w-md mx-auto bg-white rounded-full shadow-xl p-8">
                    <canvas id="porkRadarChart"></canvas>
                </div>
                <!-- Decorative elements -->
                <div
                    class="absolute -top-10 -right-10 w-32 h-32 bg-pink-100 rounded-full mix-blend-multiply filter blur-xl opacity-70">
                </div>
                <div
                    class="absolute -bottom-10 -left-10 w-32 h-32 bg-stone-200 rounded-full mix-blend-multiply filter blur-xl opacity-70">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Seasonality Section -->
<section class="py-24 bg-white">
    <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-12">
            <h2 class="font-display text-3xl text-stone-900 mb-4">Sæson</h2>
            <p class="text-stone-500">Svinekød er en helårsråvare, men traditionerne følger året.</p>
        </div>

        <div class="relative">
            <!-- Months Grid -->
            <div class="grid grid-cols-12 gap-1 mb-2">
                {% for month in ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'] %}
                <div class="text-center">
                    <div class="text-[10px] uppercase font-bold text-stone-400 mb-2">{{ month }}</div>
                    <div class="h-12 w-full rounded-sm transition-all duration-500
            {% if month in ['Nov', 'Dec'] %}
              bg-stone-800 scale-y-100
            {% else %}
              bg-stone-300 scale-y-75
            {% endif %}
          "></div>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-4">
                <span
                    class="inline-block px-3 py-1 bg-stone-100 text-stone-600 text-xs font-bold uppercase tracking-widest rounded-full">
                    Højsæson: Jul & Vinter (Tradition)
                </span>
            </div>
        </div>
    </div>
</section>

<!-- Culinary Profile -->
<section class="py-24 bg-white">
    <div class="max-w-3xl mx-auto px-6">
        <div class="flex items-baseline justify-between mb-12 border-b border-stone-200 pb-6">
            <h2 class="font-display text-4xl text-stone-900">I Køkkenet</h2>
            <span class="font-mono text-stone-400 text-sm">02</span>
        </div>

        <div class="grid md:grid-cols-2 gap-12">
            <div>
                <h3 class="font-sans font-bold text-lg mb-4 text-stone-800">Udskæringer</h3>
                <ul class="space-y-4 text-stone-600 font-serif">
                    <li class="flex items-start">
                        <span class="text-stone-300 mr-4">01</span>
                        <span><strong>Nakke & Bov:</strong> Marmoreret og smagfuldt. Perfekt til pulled pork og
                            langtidsstegning.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-stone-300 mr-4">02</span>
                        <span><strong>Mørbrad:</strong> Magert og mørt, men smagsmæssigt neutralt. Kræver omhyggelig
                            tilberedning.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-stone-300 mr-4">03</span>
                        <span><strong>Brystflæsk:</strong> Grundlaget for bacon og stegt flæsk. Fedt er smag – brug det
                            med omtanke.</span>
                    </li>
                </ul>
            </div>

            <div>
                <h3 class="font-sans font-bold text-lg mb-4 text-stone-800">Tilberedning & Tips</h3>
                <p class="text-stone-600 font-serif leading-relaxed mb-6">
                    Svinekød tåler krydderier godt. Tænk ud over salt og peber – brug fennikelfrø, salvie, æbler og
                    sennep.
                    Langtidsstegning ved lav temperatur nedbryder bindevævet i de billigere udskæringer og giver
                    fantastiske resultater.
                </p>
                <div class="bg-stone-50 p-6 rounded-lg border border-stone-100">
                    <p class="text-sm font-bold text-stone-900 mb-2">PRO TIP</p>
                    <p class="text-stone-600 text-sm italic">
                        "Brug svinekæber i stedet for oksekød i dine braiseretter. De er billigere, mere bæredygtige og
                        har en fantastisk gelatinerig konsistens."
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Minimalist Calculator -->
<section class="py-24 bg-stone-900 text-white">
    <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="font-display text-3xl md:text-4xl mb-4">Beregn Din Effekt</h2>
            <p class="text-stone-400 font-light">Se effekten af at udskifte svinekød med grønnere alternativer.</p>
        </div>

        <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class="space-y-8">
                <div>
                    <label class="block text-xs font-bold uppercase tracking-widest text-stone-500 mb-2">Forbrug
                        (kg/uge)</label>
                    <input type="number" id="porkAmount" value="20"
                        class="w-full bg-transparent border-b border-stone-700 py-4 text-3xl font-display focus:outline-none focus:border-white transition-colors text-white placeholder-stone-700">
                </div>

                <div>
                    <label class="block text-xs font-bold uppercase tracking-widest text-stone-500 mb-2">Erstat
                        med</label>
                    <select id="porkReplacement"
                        class="w-full bg-transparent border-b border-stone-700 py-4 text-xl font-sans focus:outline-none focus:border-white transition-colors text-white appearance-none cursor-pointer">
                        <option value="2" class="text-stone-900">Bælgfrugter (2 kg CO₂e)</option>
                        <option value="6.9" class="text-stone-900">Kylling (6.9 kg CO₂e)</option>
                        <option value="6" class="text-stone-900">Hvid fisk (6 kg CO₂e)</option>
                        <option value="3" class="text-stone-900">Tofu/Tempeh (3 kg CO₂e)</option>
                    </select>
                </div>

                <button onclick="calculatePorkSavings()"
                    class="group flex items-center gap-4 text-white hover:text-stone-300 transition-colors">
                    <span class="text-sm font-bold uppercase tracking-widest">Beregn nu</span>
                    <span class="text-2xl group-hover:translate-x-2 transition-transform">→</span>
                </button>
            </div>

            <div id="porkSavingsResult" class="hidden opacity-0 transition-opacity duration-700">
                <div class="border-l border-stone-700 pl-12">
                    <div class="mb-8">
                        <div class="text-6xl font-display text-white mb-2" id="porkSavingsValue">0</div>
                        <div class="text-stone-500 text-sm uppercase tracking-widest">kg CO₂e sparet / uge</div>
                    </div>
                    <div>
                        <div class="text-4xl font-display text-stone-300 mb-2" id="porkAnnualSavings">0</div>
                        <div class="text-stone-500 text-sm uppercase tracking-widest">tons CO₂e / år</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Radar Chart Config
    Chart.defaults.font.family = "'Work Sans', sans-serif";

    const ctxRadar = document.getElementById('porkRadarChart');
    new Chart(ctxRadar, {
        type: 'radar',
        data: {
            labels: ['CO₂e', 'Vand', 'Areal', 'Eutrofiering'],
            datasets: [{
                label: 'Svinekød',
                data: [20, 39, 3.5, 40], // Relative to beef (100)
                fill: true,
                backgroundColor: 'rgba(236, 72, 153, 0.2)', // Pink-500
                borderColor: 'rgb(236, 72, 153)',
                pointBackgroundColor: 'rgb(236, 72, 153)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgb(236, 72, 153)'
            }, {
                label: 'Oksekød (Reference)',
                data: [100, 100, 100, 100],
                fill: false,
                borderColor: 'rgba(120, 113, 108, 0.3)', // Stone-500 low opacity
                borderDash: [5, 5],
                pointRadius: 0
            }]
        },
        options: {
            elements: {
                line: { borderWidth: 3 }
            },
            scales: {
                r: {
                    angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                    grid: { color: 'rgba(0, 0, 0, 0.1)' },
                    pointLabels: {
                        font: { size: 12, weight: 'bold' },
                        color: '#44403c'
                    },
                    ticks: { display: false, backdropColor: 'transparent' },
                    suggestedMin: 0,
                    suggestedMax: 100
                }
            },
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { font: { size: 12 } }
                }
            }
        }
    });

    function calculatePorkSavings() {
        const porkAmount = parseFloat(document.getElementById('porkAmount').value) || 0;
        const replacementCO2 = parseFloat(document.getElementById('porkReplacement').value);
        const porkCO2 = 12;

        const amountKg = porkAmount;
        const currentEmissions = amountKg * porkCO2;
        const newEmissions = amountKg * replacementCO2;

        const weeklySavings = currentEmissions - newEmissions;
        const annualSavings = (weeklySavings * 52) / 1000;

        // Animate numbers
        animateValue("porkSavingsValue", 0, weeklySavings.toFixed(1), 1000);
        animateValue("porkAnnualSavings", 0, annualSavings.toFixed(2), 1000);

        const resultDiv = document.getElementById('porkSavingsResult');
        resultDiv.classList.remove('hidden');
        void resultDiv.offsetWidth;
        resultDiv.classList.remove('opacity-0');
    }

    function animateValue(id, start, end, duration) {
        const obj = document.getElementById(id);
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            obj.innerHTML = (progress * (end - start) + start).toFixed(id === 'porkAnnualSavings' ? 2 : 1);
            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }
</script>

{% endblock %}